<Window x:Class="Proc.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="#E0202020"
        Topmost="True"
        ShowInTaskbar="False"
        SizeToContent="WidthAndHeight"
        ResizeMode="NoResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">
    <Window.ContextMenu>
        <ContextMenu>
            <MenuItem x:Name="ToggleTitleMenu" Header="Show Title" IsCheckable="True" IsChecked="True"
                      Click="ToggleTitle_Click"/>
            <Separator/>
            <MenuItem Header="Exit" Click="Exit_Click"/>
        </ContextMenu>
    </Window.ContextMenu>
    <Grid>
        <tb:TaskbarIcon x:Name="TrayIcon" ToolTipText="Proc" IconSource="/Proc.ico"
                        TrayLeftMouseDown="TrayIcon_LeftClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Exit" Click="Exit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
        <ItemsControl x:Name="ActivityList" Padding="4,2">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" x:Name="RowPanel">
                        <TextBlock Text="{Binding TimeDisplay}" x:Name="MinutesText" Foreground="#80FF80" Width="46"
                                   FontFamily="Consolas" FontSize="12" TextAlignment="Right" Margin="0,0,4,0"/>
                        <TextBlock Text="{Binding Process}" x:Name="ProcessText" Foreground="#A0A0A0"
                                   FontFamily="Consolas" FontSize="12"/>
                        <TextBlock Text="{Binding Title}" x:Name="TitleText" Foreground="#D0D0D0"
                                   FontFamily="Consolas" FontSize="12" Margin="6,0,0,0"
                                   Visibility="{Binding TitleVisibility}"/>
                    </StackPanel>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding IsActive}" Value="True">
                            <Setter TargetName="ProcessText" Property="Foreground" Value="#FF8C00"/>
                            <Setter TargetName="TitleText" Property="Foreground" Value="#FF8C00"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Window>
